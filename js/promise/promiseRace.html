<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Promise App</title>

    <script>
        function buyAsync(name, mymoney) {
            return new Promise(function(resolve, reject) {
                setTimeout(()=>{
                    var payment = parseInt(prompt(`${name} 님 지불하고자 하는 금액을 입력하시오`))
                    var balance = mymoney - payment;
                    if(balance > 0) {
                        console.log(`${name} 님 ${payment} 원을 지불하였습니다.`);
                        resolve(balance);
                    } else {
                        reject(`${name} 님 잔액은 ${mymoney} 원 입니다. 구매할 수 없습니다`);
                    }
                }, 1000)
            })
        }
        Promise.race([
            buyAsync("Jason", 500),
            buyAsync("Jane", 600),
            buyAsync("Tony", 1000)
        ])
        .then((balance)=>{
            console.log(`잔액은 ${balance} 원 입니다.`);
        })
        .catch((error)=>{
            console.log("fail");
            console.log(error);
        });
    </script>
</head>

<body>

</body>

</html>